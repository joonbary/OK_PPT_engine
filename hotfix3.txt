ğŸ”§ Phase 1: ê¸´ê¸‰ ë²„ê·¸ ìˆ˜ì • (Critical Fixes)
Task 1.1: ì–¸ì–´ ì²˜ë¦¬ ì‹œìŠ¤í…œ ìˆ˜ì •
ìš°ì„ ìˆœìœ„: ğŸ”´ P0 (ìµœìš°ì„ )
ë¬¸ì œ ì§„ë‹¨

í•œê¸€ ë¬¸ì„œ ì…ë ¥ ì‹œ ì˜ì–´ ì œëª© ìƒì„±ë¨
ì–¸ì–´ ì»¨í…ìŠ¤íŠ¸ê°€ LLM í”„ë¡¬í”„íŠ¸ì— ì „ë‹¬ë˜ì§€ ì•ŠìŒ

ì‘ì—… ë‚´ìš©
1ë‹¨ê³„: app/services/content_generator.py ìˆ˜ì •
python# í˜„ì¬ ë¬¸ì œ (ì¶”ì •)
class ContentGenerator:
    async def generate_slide_content(self, slide_outline, context):
        # ì–¸ì–´ ì •ë³´ê°€ í”„ë¡¬í”„íŠ¸ì— í¬í•¨ë˜ì§€ ì•ŠìŒ
        prompt = f"Generate content for {slide_outline['type']}"
        # âŒ ì–¸ì–´ ì§€ì‹œ ì—†ìŒ

# ìˆ˜ì • í•„ìš”
class ContentGenerator:
    def __init__(self, language: str = "ko"):
        self.language = language  # âœ… ì–¸ì–´ ì„¤ì • ì €ì¥
        
    async def generate_slide_content(self, slide_outline, context):
        # âœ… ì–¸ì–´ë³„ í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿
        language_instructions = {
            "ko": "ëª¨ë“  ë‚´ìš©ì„ í•œêµ­ì–´ë¡œ ì‘ì„±í•˜ì„¸ìš”. ì œëª©, ë³¸ë¬¸, ë¶ˆë¦¿ í¬ì¸íŠ¸ ëª¨ë‘ í•œêµ­ì–´ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.",
            "en": "Write all content in English.",
            "ja": "ã™ã¹ã¦ã®å†…å®¹ã‚’æ—¥æœ¬èªã§æ›¸ã„ã¦ãã ã•ã„ã€‚"
        }
        
        prompt = f"""
        {language_instructions[self.language]}
        
        ìŠ¬ë¼ì´ë“œ ìœ í˜•: {slide_outline['type']}
        ì œëª© ì–¸ì–´: {self.language}
        ë³¸ë¬¸ ì–¸ì–´: {self.language}
        
        {slide_outline['content']}
        """
2ë‹¨ê³„: ëª¨ë“  Agentì— ì–¸ì–´ íŒŒë¼ë¯¸í„° ì „ë‹¬
python# app/services/workflow_orchestrator.py ìˆ˜ì •
class WorkflowOrchestrator:
    def __init__(self, language: str = "ko"):
        self.language = language
        self.agents = {
            "strategist": StrategistAgent(language=language),
            "analyst": DataAnalystAgent(language=language),
            "storyteller": StorytellerAgent(language=language)
        }
ê²€ì¦ ë°©ë²•
python# tests/test_language_handling.py
def test_korean_title_generation():
    generator = ContentGenerator(language="ko")
    result = generator.generate_slide_content({
        "type": "title",
        "topic": "AIì˜ ê¸°ì—… ì˜í–¥"
    })
    assert is_korean(result["title"])
    assert "AI" in result["title"]  # ì˜ë¬¸ ì•½ì–´ëŠ” í—ˆìš©
    assert not result["title"].startswith("AI's")  # ì˜ì–´ ë¬¸ì¥ ë¶ˆê°€

Task 1.2: ë¶ˆë¦¿ í¬ì¸íŠ¸ ì¸ì½”ë”© ìˆ˜ì •
ìš°ì„ ìˆœìœ„: ğŸ”´ P0
ë¬¸ì œ ì§„ë‹¨

"??" ê¸°í˜¸ëŠ” UTF-8 ì¸ì½”ë”© ê¹¨ì§ í˜„ìƒ
python-pptxì—ì„œ íŠ¹ìˆ˜ë¬¸ì ì²˜ë¦¬ ì˜¤ë¥˜

ì‘ì—… ë‚´ìš©
1ë‹¨ê³„: í…œí”Œë¦¿ íŒŒì¼ì˜ ë¶ˆë¦¿ ë¬¸ì í™•ì¸
python# app/templates/base_template.py í™•ì¸
class BaseTemplate:
    def _define_style(self):
        return {
            "bullet_char": "â€¢",  # âœ… ìœ ë‹ˆì½”ë“œ ë¬¸ì ì‚¬ìš©
            # âŒ "\u2022" ê°™ì€ ì´ìŠ¤ì¼€ì´í”„ ì‹œí€€ìŠ¤ í™•ì¸
        }
2ë‹¨ê³„: design_applicator.pyì—ì„œ ë¶ˆë¦¿ í¬ì¸íŠ¸ ì ìš© ë¡œì§ ìˆ˜ì •
python# app/services/design_applicator.py
class DesignApplicator:
    def _apply_bullet_points(self, text_frame, bullet_points):
        for idx, point in enumerate(bullet_points):
            paragraph = text_frame.paragraphs[idx] if idx < len(text_frame.paragraphs) else text_frame.add_paragraph()
            
            # âœ… ëª…ì‹œì  ì¸ì½”ë”© ì²˜ë¦¬
            paragraph.text = str(point).encode('utf-8').decode('utf-8')
            paragraph.level = 0
            
            # âœ… ë¶ˆë¦¿ ë¬¸ì ì„¤ì •
            paragraph.font.name = 'Arial'  # ë¶ˆë¦¿ ì§€ì› í°íŠ¸
            paragraph.line_spacing = 1.15
3ë‹¨ê³„: PPTX ì €ì¥ ì‹œ ì¸ì½”ë”© ëª…ì‹œ
python# app/services/ppt_generator.py
class PPTGenerator:
    def save(self, filename):
        # âœ… UTF-8 BOM ì—†ì´ ì €ì¥
        self.presentation.save(filename)
ê²€ì¦ ë°©ë²•
python# tests/test_bullet_encoding.py
def test_bullet_point_rendering():
    generator = PPTGenerator()
    generator.add_bullet_points(["ì²« ë²ˆì§¸ í•­ëª©", "ë‘ ë²ˆì§¸ í•­ëª©"])
    generator.save("test.pptx")
    
    # PowerPointì—ì„œ ì—´ì–´ì„œ ìˆ˜ë™ í™•ì¸
    # ìë™ ê²€ì¦: pptx íŒŒì¼ íŒŒì‹± í›„ í…ìŠ¤íŠ¸ ì¶”ì¶œ
    from pptx import Presentation
    prs = Presentation("test.pptx")
    text = prs.slides[0].shapes[0].text
    assert "??" not in text
    assert "â€¢" in text or "-" in text

Task 1.3: ìŒìŠ´ì²´ ë³€í™˜ ì‹œìŠ¤í…œ êµ¬ì¶•
ìš°ì„ ìˆœìœ„: ğŸŸ¡ P1
ì‘ì—… ë‚´ìš©
ìƒˆ íŒŒì¼ ìƒì„±: app/utils/text_formatter.py
python"""
í•œêµ­ì–´ í…ìŠ¤íŠ¸ë¥¼ ë¹„ì¦ˆë‹ˆìŠ¤ ìŒìŠ´ì²´ë¡œ ë³€í™˜í•˜ëŠ” ìœ í‹¸ë¦¬í‹°
"""

import re
from typing import List

class EumsumStyleConverter:
    """
    McKinsey ìŠ¤íƒ€ì¼ ìŒìŠ´ì²´ ë³€í™˜ê¸°
    ì„œìˆ ì²´ â†’ ìŒìŠ´ì²´ ë³€í™˜
    
    ì˜ˆì‹œ:
    "AIëŠ” ê¸°ì—…ì„ ì¬êµ¬ì„±í•œë‹¤" â†’ "AIëŠ” ê¸°ì—…ì„ ì¬êµ¬ì„±"
    "ì‹œì¥ì´ ì„±ì¥í•˜ê³  ìˆë‹¤" â†’ "ì‹œì¥ì´ ì„±ì¥ ì¤‘"
    """
    
    # ë³€í™˜ ê·œì¹™
    CONVERSION_RULES = [
        (r'(.+)í•œë‹¤$', r'\1'),           # ~í•œë‹¤ â†’ ~
        (r'(.+)ëœë‹¤$', r'\1ë¨'),         # ~ëœë‹¤ â†’ ~ë¨
        (r'(.+)ì´ë‹¤$', r'\1'),           # ~ì´ë‹¤ â†’ ~
        (r'(.+)ìˆë‹¤$', r'\1ìˆìŒ'),       # ~ìˆë‹¤ â†’ ~ìˆìŒ
        (r'(.+)ì—†ë‹¤$', r'\1ì—†ìŒ'),       # ~ì—†ë‹¤ â†’ ~ì—†ìŒ
        (r'(.+)í•˜ê³  ìˆë‹¤$', r'\1 ì¤‘'),   # ~í•˜ê³  ìˆë‹¤ â†’ ~ ì¤‘
        (r'(.+)í•˜ì˜€ë‹¤$', r'\1í•¨'),       # ~í•˜ì˜€ë‹¤ â†’ ~í•¨
        (r'(.+)í–ˆë‹¤$', r'\1í•¨'),         # ~í–ˆë‹¤ â†’ ~í•¨
        (r'(.+)í•  ê²ƒì´ë‹¤$', r'\1 ì˜ˆì •'), # ~í•  ê²ƒì´ë‹¤ â†’ ~ ì˜ˆì •
    ]
    
    @classmethod
    def convert(cls, text: str) -> str:
        """ë‹¨ì¼ ë¬¸ì¥ ë³€í™˜"""
        for pattern, replacement in cls.CONVERSION_RULES:
            text = re.sub(pattern, replacement, text)
        return text
    
    @classmethod
    def convert_bullet_points(cls, points: List[str]) -> List[str]:
        """ë¶ˆë¦¿ í¬ì¸íŠ¸ ë¦¬ìŠ¤íŠ¸ ì¼ê´„ ë³€í™˜"""
        return [cls.convert(point) for point in points]
    
    @classmethod
    def convert_headline(cls, headline: str) -> str:
        """
        í—¤ë“œë¼ì¸ íŠ¹ë³„ ì²˜ë¦¬
        - ì•¡ì…˜ ë™ì‚¬ëŠ” ìœ ì§€
        - ë ì–´ë¯¸ë§Œ ë³€í™˜
        """
        # "~ë¥¼ ì‹¤í˜„í•œë‹¤" â†’ "~ë¥¼ ì‹¤í˜„"
        # "~ê°€ ì„±ì¥í•œë‹¤" â†’ "~ê°€ ì„±ì¥"
        return cls.convert(headline)


# ì‚¬ìš© ì˜ˆì‹œ
if __name__ == "__main__":
    converter = EumsumStyleConverter()
    
    # í…ŒìŠ¤íŠ¸
    examples = [
        "AIëŠ” ê¸°ì—…ì˜ ìš´ì˜ ëª¨ë¸ì„ ê·¼ë³¸ì ìœ¼ë¡œ ì¬êµ¬ì„±í•œë‹¤",
        "ì „í†µì ì¸ í”¼ë¼ë¯¸ë“œ êµ¬ì¡°ê°€ ë³€í™”í•˜ê³  ìˆë‹¤",
        "ìƒˆë¡œìš´ ì „ë‹¬ ëª¨ë¸ë¡œ ì§„í™”í•  ê²ƒì´ë‹¤"
    ]
    
    for ex in examples:
        print(f"ì›ë³¸: {ex}")
        print(f"ë³€í™˜: {converter.convert(ex)}")
        print()
2ë‹¨ê³„: ContentGeneratorì— í†µí•©
python# app/services/content_generator.py
from app.utils.text_formatter import EumsumStyleConverter

class ContentGenerator:
    def __init__(self, language="ko"):
        self.language = language
        self.formatter = EumsumStyleConverter()
    
    async def generate_slide_content(self, slide_outline, context):
        # LLMìœ¼ë¡œ ì½˜í…ì¸  ìƒì„±
        raw_content = await self.llm_client.generate(prompt)
        
        # âœ… ìŒìŠ´ì²´ ë³€í™˜ (í•œêµ­ì–´ë§Œ)
        if self.language == "ko":
            if "headline" in raw_content:
                raw_content["headline"] = self.formatter.convert_headline(
                    raw_content["headline"]
                )
            if "bullet_points" in raw_content:
                raw_content["bullet_points"] = self.formatter.convert_bullet_points(
                    raw_content["bullet_points"]
                )
        
        return raw_content
ê²€ì¦ ë°©ë²•
python# tests/test_eumsum_converter.py
def test_eumsum_conversion():
    converter = EumsumStyleConverter()
    
    assert converter.convert("AIëŠ” ê¸°ì—…ì„ ì¬êµ¬ì„±í•œë‹¤") == "AIëŠ” ê¸°ì—…ì„ ì¬êµ¬ì„±"
    assert converter.convert("ì‹œì¥ì´ ì„±ì¥í•˜ê³  ìˆë‹¤") == "ì‹œì¥ì´ ì„±ì¥ ì¤‘"
    assert converter.convert("íˆ¬ìí•  ê²ƒì´ë‹¤") == "íˆ¬ì ì˜ˆì •"