ğŸ“ í´ë¡œë“œ ì½”ë“œ ì‘ì—… ì§€ì‹œì„œ #1
ğŸ¯ ì‘ì—… ëª©í‘œ
McKinsey ìˆ˜ì¤€ì˜ Headline Generator ì‹œìŠ¤í…œ êµ¬ì¶• (Phase 1, Day 1)
ğŸ“‚ ì‘ì—… ë””ë ‰í† ë¦¬
D:\PPT_Designer_OK
ğŸ”§ Step 1: HeadlineGenerator í•µì‹¬ í´ë˜ìŠ¤ ìƒì„±
íŒŒì¼: app/services/headline_generator.py
ë‹¤ìŒ êµ¬ì¡°ë¡œ íŒŒì¼ì„ ìƒì„±í•˜ì„¸ìš”:
python"""
McKinsey ìˆ˜ì¤€ì˜ ì•¡ì…˜ ì§€í–¥ì  í—¤ë“œë¼ì¸ ìƒì„±
- So What í…ŒìŠ¤íŠ¸ ìë™ ì ìš©
- SCQA êµ¬ì¡° (Situation-Complication-Question-Answer)
- ì •ëŸ‰í™” ê°•ì œ
"""

from typing import Dict, List, Optional, Tuple
from dataclasses import dataclass
import re
import logging

logger = logging.getLogger(__name__)


@dataclass
class HeadlineTemplate:
    """í—¤ë“œë¼ì¸ í…œí”Œë¦¿"""
    pattern: str
    example: str
    score_weight: float
    category: str  # 'growth', 'comparison', 'strategic', 'financial'


class HeadlineGenerator:
    """
    McKinsey í‘œì¤€ í—¤ë“œë¼ì¸ ìƒì„±ê¸°
    
    í•µì‹¬ ì›ì¹™:
    1. ì•¡ì…˜ ì§€í–¥ì  (ë™ì‚¬ í¬í•¨)
    2. ì •ëŸ‰í™” (ìˆ«ì í¬í•¨)
    3. So What í†µê³¼ (ì „ëµì  í•¨ì˜)
    4. í•œ ë¬¸ì¥ìœ¼ë¡œ í•µì‹¬ ì „ë‹¬
    """
    
    # McKinsey í—¤ë“œë¼ì¸ íŒ¨í„´ (4ê°€ì§€)
    TEMPLATES = [
        HeadlineTemplate(
            pattern="{ì£¼ì²´}ê°€ {ê¸°ê°„} ë‚´ {ìˆ˜ì¹˜}% {ë™ì‚¬}í•˜ì—¬ {ê²°ê³¼}",
            example="ì•„ì‹œì•„ ì‹œì¥ì´ 3ë…„ ë‚´ 50% ì„±ì¥í•˜ì—¬ ìµœëŒ€ ê¸°íšŒ ì œê³µ",
            score_weight=1.0,
            category="growth"
        ),
        HeadlineTemplate(
            pattern="{ë¹„êµëŒ€ìƒ} ëŒ€ë¹„ {ìˆ˜ì¹˜}ë°° {í˜•ìš©ì‚¬}í•œ {ì£¼ì²´}ê°€ {ê²°ê³¼}",
            example="ê²½ìŸì‚¬ ëŒ€ë¹„ 2ë°° ë¹ ë¥¸ ì„±ì¥ë¥ ì´ ì‹œì¥ ë¦¬ë”ì‹­ í™•ë³´",
            score_weight=0.95,
            category="comparison"
        ),
        HeadlineTemplate(
            pattern="{ì£¼ì²´}ì˜ {íŠ¹ì„±}ì´ {ìˆ˜ì¹˜}% ê°œì„ ìœ¼ë¡œ {ëª©í‘œ} ë‹¬ì„± ê°€ëŠ¥",
            example="ì œí’ˆ í’ˆì§ˆ 20% ê°œì„ ìœ¼ë¡œ í”„ë¦¬ë¯¸ì—„ ì‹œì¥ ì§„ì… ê°€ëŠ¥",
            score_weight=0.90,
            category="strategic"
        ),
        HeadlineTemplate(
            pattern="{ì „ëµ}ì„ í†µí•´ {ê¸°ê°„} ë‚´ {ìˆ˜ì¹˜}{ë‹¨ìœ„} {ëª©í‘œ} ì‹¤í˜„",
            example="ë””ì§€í„¸ ì „í™˜ìœ¼ë¡œ 2ë…„ ë‚´ 1000ì–µì› ë¹„ìš© ì ˆê° ì‹¤í˜„",
            score_weight=0.85,
            category="financial"
        )
    ]
    
    # McKinsey í‚¤ì›Œë“œ
    ACTION_VERBS = [
        "ì œê³µ", "í™•ë³´", "ë‹¬ì„±", "ì‹¤í˜„", "ê°œì„ ", "ì¦ê°€", "ê°ì†Œ", 
        "ì „í™˜", "í™•ëŒ€", "ê°•í™”", "êµ¬ì¶•", "ì°½ì¶œ", "ë„ì¶œ"
    ]
    
    IMPLICATION_KEYWORDS = [
        "ê°€ëŠ¥", "í•„ìš”", "ì‹¤í˜„", "í™•ë³´", "ë‹¬ì„±", "ê¸°íšŒ", "ìœ„í˜‘", 
        "ì¤‘ìš”", "í•µì‹¬", "ìš°ì„ ", "ì£¼ìš”", "ì „ëµì "
    ]
    
    def __init__(self):
        """ì´ˆê¸°í™”"""
        self.logger = logging.getLogger(self.__class__.__name__)
    
    def generate(
        self, 
        content: Dict, 
        slide_type: str = "content"
    ) -> str:
        """
        ì½˜í…ì¸ ì—ì„œ McKinsey ìˆ˜ì¤€ í—¤ë“œë¼ì¸ ìƒì„±
        
        Args:
            content: ìŠ¬ë¼ì´ë“œ ì½˜í…ì¸  (title, body, data í¬í•¨)
            slide_type: ìŠ¬ë¼ì´ë“œ ìœ í˜• (title/content/conclusion)
        
        Returns:
            str: ì•¡ì…˜ ì§€í–¥ì  í—¤ë“œë¼ì¸
        """
        try:
            # 1. ê¸°ì¡´ ì œëª© ì¶”ì¶œ
            original_title = content.get("title", "")
            
            # 2. í‚¤ì›Œë“œ ì¶”ì¶œ
            keywords = self._extract_keywords(content)
            
            # 3. ìˆ«ì ì¶”ì¶œ
            numbers = self._extract_numbers(content)
            
            # 4. í…œí”Œë¦¿ ì„ íƒ
            template = self._select_template(slide_type, keywords, numbers)
            
            # 5. í—¤ë“œë¼ì¸ ìƒì„±
            headline = self._fill_template(template, keywords, numbers, content)
            
            # 6. So What í…ŒìŠ¤íŠ¸
            if not self._passes_so_what_test(headline):
                headline = self._enhance_with_implication(headline, content)
            
            # 7. ìµœì¢… ê²€ì¦
            headline = self._finalize_headline(headline, original_title)
            
            self.logger.info(f"Generated headline: {headline}")
            return headline
            
        except Exception as e:
            self.logger.error(f"Headline generation failed: {e}")
            # í´ë°±: ì›ë³¸ ì œëª© ê°œì„ 
            return self._improve_existing_title(content.get("title", "ì œëª© ì—†ìŒ"))
    
    def _extract_keywords(self, content: Dict) -> List[str]:
        """
        ì½˜í…ì¸ ì—ì„œ í•µì‹¬ í‚¤ì›Œë“œ ì¶”ì¶œ
        
        ìš°ì„ ìˆœìœ„:
        1. ëª…ì‚¬ (ì£¼ì²´, ëŒ€ìƒ)
        2. ë™ì‚¬ (ì•¡ì…˜)
        3. í˜•ìš©ì‚¬ (íŠ¹ì„±)
        """
        keywords = []
        
        # ì œëª©ì—ì„œ ì¶”ì¶œ
        title = content.get("title", "")
        keywords.extend(self._tokenize(title))
        
        # ë³¸ë¬¸ì—ì„œ ì¶”ì¶œ
        body = content.get("body", "")
        if isinstance(body, list):
            body = " ".join(body)
        keywords.extend(self._tokenize(body))
        
        # ì¤‘ë³µ ì œê±° ë° ìƒìœ„ 5ê°œ ë°˜í™˜
        unique_keywords = list(dict.fromkeys(keywords))
        return unique_keywords[:5]
    
    def _tokenize(self, text: str) -> List[str]:
        """ê°„ë‹¨í•œ í† í°í™” (ê³µë°± ê¸°ì¤€)"""
        if not text:
            return []
        
        # íŠ¹ìˆ˜ë¬¸ì ì œê±°
        text = re.sub(r'[^\w\s%]', '', text)
        
        # ê³µë°±ìœ¼ë¡œ ë¶„ë¦¬
        tokens = text.split()
        
        # 2ê¸€ì ì´ìƒë§Œ ë°˜í™˜
        return [t for t in tokens if len(t) >= 2]
    
    def _extract_numbers(self, content: Dict) -> List[float]:
        """ì½˜í…ì¸ ì—ì„œ ìˆ«ì ì¶”ì¶œ"""
        numbers = []
        
        # ì „ì²´ ì½˜í…ì¸  ë¬¸ìì—´í™”
        text = str(content)
        
        # ìˆ«ì íŒ¨í„´ ë§¤ì¹­
        # ì˜ˆ: 10%, 1000ì–µ, 2.5ë°°, 50ëª…
        patterns = [
            r'(\d+\.?\d*)\s*%',      # í¼ì„¼íŠ¸
            r'(\d+\.?\d*)\s*ë°°',      # ë°°ìˆ˜
            r'(\d+\.?\d*)\s*ì–µ',      # ì–µ ë‹¨ìœ„
            r'(\d+\.?\d*)\s*ë§Œ',      # ë§Œ ë‹¨ìœ„
            r'(\d+\.?\d*)',           # ì¼ë°˜ ìˆ«ì
        ]
        
        for pattern in patterns:
            matches = re.findall(pattern, text)
            numbers.extend([float(m) for m in matches if m])
        
        return numbers[:3]  # ìƒìœ„ 3ê°œ
    
    def _select_template(
        self, 
        slide_type: str, 
        keywords: List[str], 
        numbers: List[float]
    ) -> HeadlineTemplate:
        """
        ìŠ¬ë¼ì´ë“œ íƒ€ì…ê³¼ ì½˜í…ì¸ ì— ë§ëŠ” í…œí”Œë¦¿ ì„ íƒ
        
        ì„ íƒ ë¡œì§:
        1. ìˆ«ì ë§ìŒ + ë¹„êµ í‚¤ì›Œë“œ â†’ comparison
        2. ì„±ì¥/ì¦ê°€ í‚¤ì›Œë“œ â†’ growth
        3. ì „ëµ/ëª©í‘œ í‚¤ì›Œë“œ â†’ strategic
        4. ê¸ˆì•¡/ë¹„ìš© í‚¤ì›Œë“œ â†’ financial
        """
        # í‚¤ì›Œë“œ ê¸°ë°˜ ì¹´í…Œê³ ë¦¬ ê°ì§€
        keyword_str = " ".join(keywords).lower()
        
        if any(word in keyword_str for word in ["ëŒ€ë¹„", "ë¹„êµ", "ê²½ìŸ"]):
            category = "comparison"
        elif any(word in keyword_str for word in ["ì„±ì¥", "ì¦ê°€", "í™•ëŒ€"]):
            category = "growth"
        elif any(word in keyword_str for word in ["ì–µ", "ì›", "ë¹„ìš©", "ë§¤ì¶œ"]):
            category = "financial"
        else:
            category = "strategic"
        
        # ì¹´í…Œê³ ë¦¬ì— ë§ëŠ” í…œí”Œë¦¿ ì°¾ê¸°
        for template in self.TEMPLATES:
            if template.category == category:
                return template
        
        # ê¸°ë³¸ê°’: ì²« ë²ˆì§¸ í…œí”Œë¦¿
        return self.TEMPLATES[0]
    
    def _fill_template(
        self, 
        template: HeadlineTemplate, 
        keywords: List[str], 
        numbers: List[float],
        content: Dict
    ) -> str:
        """
        í…œí”Œë¦¿ì— ì‹¤ì œ ê°’ ì±„ìš°ê¸°
        
        ì˜ˆì‹œ:
        í…œí”Œë¦¿: "{ì£¼ì²´}ê°€ {ê¸°ê°„} ë‚´ {ìˆ˜ì¹˜}% {ë™ì‚¬}í•˜ì—¬ {ê²°ê³¼}"
        ì…ë ¥: keywords=["ì‹œì¥", "ì„±ì¥"], numbers=[50]
        ì¶œë ¥: "ì‹œì¥ì´ 3ë…„ ë‚´ 50% ì„±ì¥í•˜ì—¬ ìµœëŒ€ ê¸°íšŒ ì œê³µ"
        """
        # ê¸°ë³¸ê°’ ì„¤ì •
        subject = keywords[0] if keywords else "ì£¼ìš” ì˜ì—­"
        action = self._select_action_verb(keywords)
        number = int(numbers[0]) if numbers else 10
        result = self._generate_result(keywords, number)
        
        # í…œí”Œë¦¿ ì¹´í…Œê³ ë¦¬ë³„ ì²˜ë¦¬
        if template.category == "growth":
            return f"{subject}ì´ 3ë…„ ë‚´ {number}% {action}í•˜ì—¬ {result}"
        
        elif template.category == "comparison":
            benchmark = keywords[1] if len(keywords) > 1 else "ì—…ê³„ í‰ê· "
            multiplier = round(number / 10) if number > 10 else 2
            return f"{benchmark} ëŒ€ë¹„ {multiplier}ë°° ë¹ ë¥¸ {subject}ì´ {result}"
        
        elif template.category == "strategic":
            characteristic = keywords[1] if len(keywords) > 1 else "í•µì‹¬ ì—­ëŸ‰"
            return f"{subject}ì˜ {characteristic}ì´ {number}% ê°œì„ ìœ¼ë¡œ {result}"
        
        elif template.category == "financial":
            strategy = keywords[0] if keywords else "ì „ëµì  íˆ¬ì"
            amount = f"{number}ì–µì›" if number < 1000 else f"{int(number/1000)}ì¡°ì›"
            return f"{strategy}ì„ í†µí•´ 2ë…„ ë‚´ {amount} {result}"
        
        # í´ë°±
        return f"{subject}ì´ {number}% {action}í•˜ì—¬ {result}"
    
    def _select_action_verb(self, keywords: List[str]) -> str:
        """í‚¤ì›Œë“œì—ì„œ ì ì ˆí•œ ì•¡ì…˜ ë™ì‚¬ ì„ íƒ"""
        keyword_str = " ".join(keywords).lower()
        
        verb_map = {
            "ì„±ì¥": "ì„±ì¥",
            "ì¦ê°€": "ì¦ê°€",
            "ê°œì„ ": "ê°œì„ ",
            "í™•ëŒ€": "í™•ëŒ€",
            "ê°•í™”": "ê°•í™”",
            "ê°ì†Œ": "ì ˆê°",
        }
        
        for keyword, verb in verb_map.items():
            if keyword in keyword_str:
                return verb
        
        return "ê°œì„ "  # ê¸°ë³¸ê°’
    
    def _generate_result(self, keywords: List[str], number: float) -> str:
        """ê²°ê³¼ ë¬¸êµ¬ ìƒì„±"""
        keyword_str = " ".join(keywords).lower()
        
        # ê¸ì •ì  ê²°ê³¼
        if number > 0:
            if "ì‹œì¥" in keyword_str:
                return "ì‹œì¥ ì„ ì  ê¸°íšŒ í™•ë³´"
            elif "ê²½ìŸ" in keyword_str:
                return "ê²½ìŸ ìš°ìœ„ ê°•í™” ê°€ëŠ¥"
            elif "ë¹„ìš©" in keyword_str:
                return "ë¹„ìš© ì ˆê° ì‹¤í˜„"
            elif "ë§¤ì¶œ" in keyword_str:
                return "ë§¤ì¶œ ì„±ì¥ ê°€ì†í™”"
            else:
                return "ëª©í‘œ ë‹¬ì„± ê°€ëŠ¥"
        
        # ë¶€ì •ì  ê²°ê³¼ (ìŒìˆ˜)
        else:
            return "ê°œì„  ì¡°ì¹˜ í•„ìš”"
    
    def _passes_so_what_test(self, headline: str) -> bool:
        """
        So What í…ŒìŠ¤íŠ¸
        
        í†µê³¼ ê¸°ì¤€:
        1. ë™ì‚¬ í¬í•¨ (ì•¡ì…˜)
        2. ìˆ«ì í¬í•¨ (ì •ëŸ‰í™”)
        3. í•¨ì˜ í‚¤ì›Œë“œ ("ê°€ëŠ¥", "í•„ìš”" ë“±)
        4. 20ì ì´ìƒ (ì¶©ë¶„í•œ ì •ë³´)
        """
        has_verb = any(verb in headline for verb in self.ACTION_VERBS)
        has_number = bool(re.search(r'\d+', headline))
        has_implication = any(word in headline for word in self.IMPLICATION_KEYWORDS)
        sufficient_length = len(headline) >= 20
        
        return all([has_verb, has_number, has_implication, sufficient_length])
    
    def _enhance_with_implication(self, headline: str, content: Dict) -> str:
        """
        ì „ëµì  í•¨ì˜ ì¶”ê°€
        
        ë³€í™˜ ì˜ˆì‹œ:
        "ì‹œì¥ì´ ì„±ì¥í•œë‹¤" 
        â†’ "ì‹œì¥ ì„±ì¥ìœ¼ë¡œ ì¡°ê¸° ì§„ì… ì‹œ ì„ ì  íš¨ê³¼ í™•ë³´ ê°€ëŠ¥"
        """
        implication_patterns = {
            "ì„±ì¥": "ì„ ì  íš¨ê³¼ í™•ë³´ ê°€ëŠ¥",
            "ì¦ê°€": "ê²½ìŸ ìš°ìœ„ ê°•í™” ê¸°íšŒ",
            "ê°ì†Œ": "ë¹„ìš© ì ˆê° ì‹¤í˜„ ê°€ëŠ¥",
            "ê°œì„ ": "ëª©í‘œ ë‹¬ì„± ê°€ëŠ¥",
            "ë³€í™”": "ì‹œì¥ ì¬í¸ ì£¼ë„ í•„ìš”",
            "ì°¨ì´": "ì°¨ë³„í™” ì „ëµ ìˆ˜ë¦½ í•„ìš”",
        }
        
        for keyword, implication in implication_patterns.items():
            if keyword in headline:
                # ì´ë¯¸ í•¨ì˜ í¬í•¨ ì‹œ ì¤‘ë³µ ë°©ì§€
                if any(imp in headline for imp in self.IMPLICATION_KEYWORDS):
                    return headline
                return f"{headline}, {implication}"
        
        # ê¸°ë³¸ í•¨ì˜ ì¶”ê°€
        if not any(imp in headline for imp in self.IMPLICATION_KEYWORDS):
            return f"{headline}, ì „ëµì  ëŒ€ì‘ í•„ìš”"
        
        return headline
    
    def _finalize_headline(self, headline: str, original: str) -> str:
        """
        ìµœì¢… í—¤ë“œë¼ì¸ ê²€ì¦ ë° ì¡°ì •
        
        - ìµœëŒ€ ê¸¸ì´ ì œí•œ (60ì)
        - ìµœì†Œ ê¸¸ì´ ë³´ì¥ (20ì)
        - ë§ˆì¹¨í‘œ ì œê±°
        """
        # ë§ˆì¹¨í‘œ ì œê±°
        headline = headline.rstrip(".")
        
        # ê¸¸ì´ ê²€ì¦
        if len(headline) > 60:
            # 60ìë¡œ ìë¥´ê³  "..." ì¶”ê°€
            headline = headline[:57] + "..."
        
        elif len(headline) < 20:
            # ì›ë³¸ ì œëª© í™œìš©í•˜ì—¬ ë³´ê°•
            if original and len(original) > 5:
                headline = f"{original} - {headline}"
        
        return headline
    
    def _improve_existing_title(self, title: str) -> str:
        """
        ê¸°ì¡´ ì œëª© ê°œì„  (í´ë°±)
        
        ì˜ˆì‹œ:
        "ì‹œì¥ ë¶„ì„" â†’ "ì‹œì¥ ë¶„ì„ì„ í†µí•œ ì „ëµì  ë°©í–¥ ì œì‹œ"
        """
        if not title or len(title) < 3:
            return "í•µì‹¬ ì¸ì‚¬ì´íŠ¸ ë° ì „ëµì  ì‹œì‚¬ì "
        
        # ì´ë¯¸ ì¢‹ì€ ì œëª©ì´ë©´ ê·¸ëŒ€ë¡œ
        if len(title) >= 20 and any(verb in title for verb in self.ACTION_VERBS):
            return title
        
        # ê°œì„  íŒ¨í„´
        improvements = [
            f"{title}ì„ í†µí•œ í•µì‹¬ ì¸ì‚¬ì´íŠ¸ ë„ì¶œ",
            f"{title} ë¶„ì„ ë° ì „ëµì  ì‹œì‚¬ì ",
            f"{title} í˜„í™©ê³¼ í–¥í›„ ë°©í–¥ì„±",
        ]
        
        # ê¸¸ì´ì— ë§ëŠ” ê°œì„ ì•ˆ ì„ íƒ
        for improved in improvements:
            if 20 <= len(improved) <= 60:
                return improved
        
        return improvements[0]


class SoWhatTester:
    """So What í…ŒìŠ¤íŠ¸ ìë™í™”"""
    
    def __init__(self):
        self.logger = logging.getLogger(self.__class__.__name__)
    
    def test(self, headline: str) -> Dict[str, any]:
        """
        McKinsey So What í…ŒìŠ¤íŠ¸
        
        Returns:
            {
                "passed": bool,
                "score": float (0-1),
                "issues": List[str],
                "suggestions": List[str]
            }
        """
        issues = []
        suggestions = []
        score = 1.0
        
        # 1. ì•¡ì…˜ì„± ê²€ì‚¬ (30%)
        if not self._has_action_verb(headline):
            issues.append("ì•¡ì…˜ ë™ì‚¬ ë¶€ì¬")
            suggestions.append("'ì œê³µ', 'í™•ë³´', 'ë‹¬ì„±', 'ì‹¤í˜„' ë“± ë™ì‚¬ ì¶”ê°€")
            score -= 0.3
        
        # 2. ì •ëŸ‰í™” ê²€ì‚¬ (30%)
        if not self._has_quantification(headline):
            issues.append("ì •ëŸ‰í™” ë¶€ì¬")
            suggestions.append("êµ¬ì²´ì  ìˆ«ìë‚˜ ë¹„ìœ¨ ì¶”ê°€ (ì˜ˆ: 20%, 2ë°°)")
            score -= 0.3
        
        # 3. í•¨ì˜ ê²€ì‚¬ (20%)
        if not self._has_implication(headline):
            issues.append("ì „ëµì  í•¨ì˜ ë¶€ì¬")
            suggestions.append("'ê°€ëŠ¥', 'í•„ìš”', 'í™•ë³´' ë“± í•¨ì˜ í‚¤ì›Œë“œ ì¶”ê°€")
            score -= 0.2
        
        # 4. ê¸¸ì´ ê²€ì‚¬ (20%)
        if len(headline) < 20:
            issues.append("í—¤ë“œë¼ì¸ ë„ˆë¬´ ì§§ìŒ (20ì ë¯¸ë§Œ)")
            suggestions.append("ë°°ê²½ì´ë‚˜ ê²°ê³¼ ì¶”ê°€í•˜ì—¬ 20ì ì´ìƒ ì‘ì„±")
            score -= 0.2
        elif len(headline) > 60:
            issues.append("í—¤ë“œë¼ì¸ ë„ˆë¬´ ê¹€ (60ì ì´ˆê³¼)")
            suggestions.append("í•µì‹¬ë§Œ ë‚¨ê¸°ê³  60ì ì´ë‚´ë¡œ ì¶•ì•½")
            score -= 0.1
        
        result = {
            "passed": score >= 0.7,
            "score": max(0.0, score),
            "issues": issues,
            "suggestions": suggestions
        }
        
        self.logger.info(f"So What test result: {result}")
        return result
    
    def _has_action_verb(self, headline: str) -> bool:
        """ì•¡ì…˜ ë™ì‚¬ í¬í•¨ ì—¬ë¶€"""
        action_verbs = [
            "ì œê³µ", "í™•ë³´", "ë‹¬ì„±", "ì‹¤í˜„", "ê°œì„ ", "ì¦ê°€", "ê°ì†Œ",
            "ì „í™˜", "í™•ëŒ€", "ê°•í™”", "êµ¬ì¶•", "ì°½ì¶œ", "ë„ì¶œ", "ê°€ëŠ¥", "í•„ìš”"
        ]
        return any(verb in headline for verb in action_verbs)
    
    def _has_quantification(self, headline: str) -> bool:
        """ì •ëŸ‰í™” í¬í•¨ ì—¬ë¶€"""
        # ìˆ«ì íŒ¨í„´
        return bool(re.search(r'\d+', headline))
    
    def _has_implication(self, headline: str) -> bool:
        """í•¨ì˜ í‚¤ì›Œë“œ í¬í•¨ ì—¬ë¶€"""
        implication_keywords = [
            "ê°€ëŠ¥", "í•„ìš”", "ì‹¤í˜„", "í™•ë³´", "ë‹¬ì„±", "ê¸°íšŒ", "ìœ„í˜‘",
            "ì¤‘ìš”", "í•µì‹¬", "ìš°ì„ ", "ì£¼ìš”", "ì „ëµì "
        ]
        return any(keyword in headline for keyword in implication_keywords)

âœ… ì‘ì—… ì™„ë£Œ í›„ í™•ì¸ ì‚¬í•­

íŒŒì¼ ìƒì„± í™•ì¸

bash   ls app/services/headline_generator.py

êµ¬ë¬¸ ì˜¤ë¥˜ í™•ì¸

bash   python -m py_compile app/services/headline_generator.py

ê°„ë‹¨í•œ í…ŒìŠ¤íŠ¸ ì‹¤í–‰

python   from app.services.headline_generator import HeadlineGenerator, SoWhatTester
   
   # í…ŒìŠ¤íŠ¸ ì½˜í…ì¸ 
   content = {
       "title": "ì‹œì¥ ë¶„ì„",
       "body": "ì•„ì‹œì•„ ì‹œì¥ì´ 50% ì„±ì¥í–ˆë‹¤",
       "data": {"growth": 50}
   }
   
   # í—¤ë“œë¼ì¸ ìƒì„±
   generator = HeadlineGenerator()
   headline = generator.generate(content)
   print(f"ìƒì„±ëœ í—¤ë“œë¼ì¸: {headline}")
   
   # So What í…ŒìŠ¤íŠ¸
   tester = SoWhatTester()
   result = tester.test(headline)
   print(f"í…ŒìŠ¤íŠ¸ ê²°ê³¼: {result}")

ì´ ì‘ì—…ì„ ì™„ë£Œí•˜ë©´ ë‹¤ìŒ ë‹¨ê³„ë¡œ ì§„í–‰í•˜ê² ìŠµë‹ˆë‹¤:

Step 2: ContentGenerator í†µí•©
Step 3: ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„±