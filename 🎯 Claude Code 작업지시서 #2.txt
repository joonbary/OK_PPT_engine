ğŸ¯ Claude Code ì‘ì—…ì§€ì‹œì„œ #2
Step 2: ContentGeneratorì— HeadlineGenerator í†µí•©

ğŸ“‹ ì‘ì—… ê°œìš”

íŒŒì¼: app/services/content_generator.py
ëª©ì : ëª¨ë“  ìŠ¬ë¼ì´ë“œì— McKinsey ìŠ¤íƒ€ì¼ í—¤ë“œë¼ì¸ ìë™ ì ìš©
ì˜ˆìƒ ì‹œê°„: 30-60ë¶„
ë‚œì´ë„: â­â­â˜†â˜†â˜† (ì¤‘í•˜)
ì˜ˆìƒ íš¨ê³¼: Clarity 0.40 â†’ 0.90 (+0.50)


ğŸ” í˜„ì¬ ìƒíƒœ íŒŒì•…
1. ë¨¼ì € í˜„ì¬ íŒŒì¼ í™•ì¸
bash# ContentGenerator íŒŒì¼ í™•ì¸
docker exec mckinsey-ppt-generator-app-1 cat app/services/content_generator.py | head -100
í™•ì¸ ì‚¬í•­:

í˜„ì¬ generate_slide_content() ë©”ì„œë“œ êµ¬ì¡°
íƒ€ì´í‹€/í—¤ë“œë¼ì¸ ìƒì„± ë¡œì§ ìœ ë¬´
ìŠ¬ë¼ì´ë“œ ë°ì´í„° êµ¬ì¡°


ğŸ”¨ êµ¬í˜„ ì‘ì—…
Step 2.1: HeadlineGenerator Import ì¶”ê°€
ìœ„ì¹˜: íŒŒì¼ ìƒë‹¨
python# app/services/content_generator.py

from typing import Dict, List, Optional, Any
import logging
from datetime import datetime

# âœ… ì¶”ê°€í•  import
from app.services.headline_generator import HeadlineGenerator, SoWhatTester

logger = logging.getLogger(__name__)


class ContentGenerator:
    """ì½˜í…ì¸  ìƒì„± ì„œë¹„ìŠ¤"""
    
    def __init__(self):
        # ê¸°ì¡´ ì½”ë“œ...
        
        # âœ… HeadlineGenerator ì¸ìŠ¤í„´ìŠ¤ ì¶”ê°€
        self.headline_generator = HeadlineGenerator()
        self.sowhat_tester = SoWhatTester()
        
        logger.info("ContentGenerator initialized with HeadlineGenerator")

Step 2.2: í—¤ë“œë¼ì¸ ìë™ ìƒì„± ë©”ì„œë“œ ì¶”ê°€
ìœ„ì¹˜: ContentGenerator í´ë˜ìŠ¤ ë‚´ë¶€
pythonclass ContentGenerator:
    
    def _generate_or_enhance_headline(
        self, 
        slide_data: Dict, 
        slide_index: int
    ) -> str:
        """
        ìŠ¬ë¼ì´ë“œ í—¤ë“œë¼ì¸ ìƒì„± ë˜ëŠ” ê°œì„ 
        
        Priority:
        1. ê¸°ì¡´ í—¤ë“œë¼ì¸ì´ ê³ í’ˆì§ˆ(0.80+)ì´ë©´ ìœ ì§€
        2. ê¸°ì¡´ í—¤ë“œë¼ì¸ì´ ì €í’ˆì§ˆì´ë©´ ê°œì„ 
        3. í—¤ë“œë¼ì¸ ì—†ìœ¼ë©´ ìƒˆë¡œ ìƒì„±
        
        Args:
            slide_data: ìŠ¬ë¼ì´ë“œ ë°ì´í„°
            slide_index: ìŠ¬ë¼ì´ë“œ ì¸ë±ìŠ¤ (0ë¶€í„° ì‹œì‘)
        
        Returns:
            ìµœì¢… í—¤ë“œë¼ì¸ ë¬¸ìì—´
        """
        # 1. ê¸°ì¡´ í—¤ë“œë¼ì¸ í™•ì¸
        existing_headline = (
            slide_data.get('headline') or 
            slide_data.get('title') or 
            ''
        )
        
        # 2. ì²« ìŠ¬ë¼ì´ë“œëŠ” íŠ¹ë³„ ì²˜ë¦¬
        if slide_index == 0:
            if existing_headline:
                return existing_headline
            else:
                # í”„ë ˆì  í…Œì´ì…˜ ì œëª© ìƒì„±
                return self._generate_presentation_title(slide_data)
        
        # 3. ê¸°ì¡´ í—¤ë“œë¼ì¸ í’ˆì§ˆ í‰ê°€
        if existing_headline:
            quality_score = self.sowhat_tester.evaluate(existing_headline)
            
            if quality_score >= 0.80:
                logger.info(f"Slide {slide_index}: ê¸°ì¡´ í—¤ë“œë¼ì¸ ìœ ì§€ (í’ˆì§ˆ: {quality_score:.2f})")
                return existing_headline
            else:
                logger.info(f"Slide {slide_index}: í—¤ë“œë¼ì¸ ê°œì„  í•„ìš” (í’ˆì§ˆ: {quality_score:.2f})")
        
        # 4. ìƒˆ í—¤ë“œë¼ì¸ ìƒì„±
        new_headline = self._create_headline_from_content(slide_data)
        
        # 5. ìƒì„±ëœ í—¤ë“œë¼ì¸ í’ˆì§ˆ í™•ì¸
        new_quality = self.sowhat_tester.evaluate(new_headline)
        logger.info(f"Slide {slide_index}: ìƒˆ í—¤ë“œë¼ì¸ ìƒì„± (í’ˆì§ˆ: {new_quality:.2f})")
        
        # 6. í’ˆì§ˆì´ ë„ˆë¬´ ë‚®ìœ¼ë©´ ì¬ìƒì„± (ìµœëŒ€ 3íšŒ)
        retry_count = 0
        while new_quality < 0.70 and retry_count < 3:
            logger.warning(f"Slide {slide_index}: í—¤ë“œë¼ì¸ ì¬ìƒì„± (ì‹œë„ {retry_count + 1}/3)")
            new_headline = self._create_headline_from_content(slide_data, retry=True)
            new_quality = self.sowhat_tester.evaluate(new_headline)
            retry_count += 1
        
        return new_headline
    
    def _generate_presentation_title(self, first_slide_data: Dict) -> str:
        """
        í”„ë ˆì  í…Œì´ì…˜ ë©”ì¸ íƒ€ì´í‹€ ìƒì„±
        
        Args:
            first_slide_data: ì²« ë²ˆì§¸ ìŠ¬ë¼ì´ë“œ ë°ì´í„°
        
        Returns:
            í”„ë ˆì  í…Œì´ì…˜ íƒ€ì´í‹€
        """
        # ì½˜í…ì¸ ì—ì„œ í•µì‹¬ ì£¼ì œ ì¶”ì¶œ
        content = first_slide_data.get('content', [])
        
        if isinstance(content, list) and content:
            # ì²« ë²ˆì§¸ ì½˜í…ì¸  í•­ëª© ì‚¬ìš©
            main_topic = str(content[0])
        elif isinstance(content, str):
            main_topic = content
        else:
            main_topic = "ì „ëµì  ì œì•ˆ"
        
        # ê°„ë‹¨í•˜ê³  ëª…í™•í•œ íƒ€ì´í‹€ ë°˜í™˜
        # (ì²« ìŠ¬ë¼ì´ë“œëŠ” ë³´í†µ ê°„ë‹¨í•œ íƒ€ì´í‹€ë§Œ í•„ìš”)
        return main_topic[:50]  # ìµœëŒ€ 50ì
    
    def _create_headline_from_content(
        self, 
        slide_data: Dict, 
        retry: bool = False
    ) -> str:
        """
        ìŠ¬ë¼ì´ë“œ ì½˜í…ì¸ ë¡œë¶€í„° í—¤ë“œë¼ì¸ ìƒì„±
        
        Args:
            slide_data: ìŠ¬ë¼ì´ë“œ ë°ì´í„°
            retry: ì¬ì‹œë„ ì—¬ë¶€ (Trueë©´ ë‹¤ë¥¸ íŒ¨í„´ ì‹œë„)
        
        Returns:
            ìƒì„±ëœ í—¤ë“œë¼ì¸
        """
        content = slide_data.get('content', [])
        
        # ì½˜í…ì¸ ë¥¼ ë¶„ì„í•˜ì—¬ ì ì ˆí•œ íŒ¨í„´ ì„ íƒ
        pattern_type = self._detect_content_pattern(content, retry)
        
        # íŒ¨í„´ë³„ í—¤ë“œë¼ì¸ ìƒì„±
        if pattern_type == 'growth':
            return self._generate_growth_headline(content)
        elif pattern_type == 'comparison':
            return self._generate_comparison_headline(content)
        elif pattern_type == 'strategic':
            return self._generate_strategic_headline(content)
        elif pattern_type == 'financial':
            return self._generate_financial_headline(content)
        else:
            # ê¸°ë³¸: Strategic íŒ¨í„´
            return self._generate_strategic_headline(content)
    
    def _detect_content_pattern(self, content: List, retry: bool = False) -> str:
        """
        ì½˜í…ì¸  ë¶„ì„í•˜ì—¬ ì ì ˆí•œ í—¤ë“œë¼ì¸ íŒ¨í„´ ê°ì§€
        
        Args:
            content: ìŠ¬ë¼ì´ë“œ ì½˜í…ì¸ 
            retry: ì¬ì‹œë„ ì—¬ë¶€ (Trueë©´ ë‹¤ë¥¸ íŒ¨í„´ ë°˜í™˜)
        
        Returns:
            íŒ¨í„´ íƒ€ì…: 'growth' | 'comparison' | 'strategic' | 'financial'
        """
        content_text = ' '.join(str(item) for item in content).lower()
        
        # í‚¤ì›Œë“œ ê¸°ë°˜ íŒ¨í„´ ê°ì§€
        if retry:
            # ì¬ì‹œë„ ì‹œ Strategic ë˜ëŠ” Financial ì‚¬ìš©
            return 'strategic' if 'strategic' not in content_text else 'financial'
        
        # Growth íŒ¨í„´ ê°ì§€
        growth_keywords = ['ì„±ì¥', 'ì¦ê°€', 'í™•ëŒ€', 'ìƒìŠ¹', '%', 'ë°°']
        if any(keyword in content_text for keyword in growth_keywords):
            return 'growth'
        
        # Comparison íŒ¨í„´ ê°ì§€
        comparison_keywords = ['ëŒ€ë¹„', 'ë¹„êµ', 'ê²½ìŸ', 'ì°¨ì´', 'ìš°ìœ„']
        if any(keyword in content_text for keyword in comparison_keywords):
            return 'comparison'
        
        # Financial íŒ¨í„´ ê°ì§€
        financial_keywords = ['ì–µ', 'ì¡°', 'ì›', 'ë§¤ì¶œ', 'ìˆ˜ìµ', 'ë¹„ìš©', 'ì ˆê°']
        if any(keyword in content_text for keyword in financial_keywords):
            return 'financial'
        
        # ê¸°ë³¸ê°’: Strategic
        return 'strategic'
    
    def _generate_growth_headline(self, content: List) -> str:
        """Growth íŒ¨í„´ í—¤ë“œë¼ì¸ ìƒì„±"""
        # ì½˜í…ì¸ ì—ì„œ ì£¼ì²´, ê¸°ê°„, ìˆ˜ì¹˜, ê²°ê³¼ ì¶”ì¶œ ì‹œë„
        context = {
            'subject': self._extract_subject(content),
            'period': self._extract_period(content),
            'metric': self._extract_metric(content),
            'result': self._extract_result(content)
        }
        
        return self.headline_generator.generate_headline('growth', context)
    
    def _generate_comparison_headline(self, content: List) -> str:
        """Comparison íŒ¨í„´ í—¤ë“œë¼ì¸ ìƒì„±"""
        context = {
            'subject': self._extract_subject(content),
            'comparison': self._extract_comparison(content),
            'metric': self._extract_metric(content),
            'result': self._extract_result(content)
        }
        
        return self.headline_generator.generate_headline('comparison', context)
    
    def _generate_strategic_headline(self, content: List) -> str:
        """Strategic íŒ¨í„´ í—¤ë“œë¼ì¸ ìƒì„±"""
        context = {
            'subject': self._extract_subject(content),
            'strength': self._extract_strength(content),
            'metric': self._extract_metric(content),
            'goal': self._extract_goal(content)
        }
        
        return self.headline_generator.generate_headline('strategic', context)
    
    def _generate_financial_headline(self, content: List) -> str:
        """Financial íŒ¨í„´ í—¤ë“œë¼ì¸ ìƒì„±"""
        context = {
            'strategy': self._extract_strategy(content),
            'period': self._extract_period(content),
            'amount': self._extract_amount(content),
            'goal': self._extract_goal(content)
        }
        
        return self.headline_generator.generate_headline('financial', context)
    
    # === ì½˜í…ì¸  ì¶”ì¶œ í—¬í¼ ë©”ì„œë“œ ===
    
    def _extract_subject(self, content: List) -> str:
        """ì£¼ì²´ ì¶”ì¶œ (ì£¼ì–´)"""
        if not content:
            return "í•µì‹¬ ì‚¬ì—…"
        
        # ì²« ë²ˆì§¸ ëª…ì‚¬êµ¬ ë˜ëŠ” ì²« ë¬¸ì¥ì˜ ì£¼ì–´
        first_item = str(content[0]) if content else "ì‚¬ì—…"
        
        # ê°„ë‹¨í•œ ëª…ì‚¬ ì¶”ì¶œ (10ì ì´ë‚´)
        words = first_item.split()
        for word in words[:3]:
            if len(word) <= 10 and word not in ['ì€', 'ëŠ”', 'ì´', 'ê°€']:
                return word
        
        return "í•µì‹¬ ì˜ì—­"
    
    def _extract_period(self, content: List) -> str:
        """ê¸°ê°„ ì¶”ì¶œ"""
        content_text = ' '.join(str(item) for item in content)
        
        # ê¸°ê°„ íŒ¨í„´ ì¶”ì¶œ
        import re
        period_patterns = [
            r'(\d+ë…„)',
            r'(\d+ê°œì›”)',
            r'(\d+ë¶„ê¸°)',
            r'(ë‹¨ê¸°|ì¤‘ê¸°|ì¥ê¸°)'
        ]
        
        for pattern in period_patterns:
            match = re.search(pattern, content_text)
            if match:
                return match.group(1)
        
        return "3ë…„"  # ê¸°ë³¸ê°’
    
    def _extract_metric(self, content: List) -> str:
        """ìˆ˜ì¹˜ ì§€í‘œ ì¶”ì¶œ (%, ë°°ìˆ˜ ë“±)"""
        content_text = ' '.join(str(item) for item in content)
        
        import re
        # ìˆ«ì + ë‹¨ìœ„ íŒ¨í„´
        metric_patterns = [
            r'(\d+\.?\d*%)',
            r'(\d+\.?\d*ë°°)',
            r'(\d+\.?\d*í¬ì¸íŠ¸)'
        ]
        
        for pattern in metric_patterns:
            match = re.search(pattern, content_text)
            if match:
                return match.group(1)
        
        return "50%"  # ê¸°ë³¸ê°’
    
    def _extract_result(self, content: List) -> str:
        """ê²°ê³¼/ì„±ê³¼ ì¶”ì¶œ"""
        # ê¸ì •ì  ê²°ê³¼ í‚¤ì›Œë“œ
        positive_results = [
            'ì„±ì¥', 'ë‹¬ì„±', 'í™•ë³´', 'ì‹¤í˜„', 'ê°œì„ ',
            'ì¦ëŒ€', 'ê°•í™”', 'í–¥ìƒ', 'ê¸°íšŒ', 'ë¦¬ë”ì‹­'
        ]
        
        content_text = ' '.join(str(item) for item in content)
        
        for result in positive_results:
            if result in content_text:
                return f"{result} ê°€ëŠ¥"
        
        return "ëª©í‘œ ë‹¬ì„±"
    
    def _extract_comparison(self, content: List) -> str:
        """ë¹„êµ ëŒ€ìƒ ì¶”ì¶œ"""
        content_text = ' '.join(str(item) for item in content)
        
        comparison_keywords = ['ê²½ìŸì‚¬', 'ì—…ê³„', 'í‰ê· ', 'ì „ë…„']
        
        for keyword in comparison_keywords:
            if keyword in content_text:
                return keyword
        
        return "ê²½ìŸì‚¬"
    
    def _extract_strength(self, content: List) -> str:
        """ê°•ì /íŠ¹ì„± ì¶”ì¶œ"""
        strength_keywords = [
            'í˜ì‹ ', 'íš¨ìœ¨í™”', 'ì°¨ë³„í™”', 'ê²½ìŸë ¥',
            'ê¸°ìˆ ë ¥', 'ë¸Œëœë“œ', 'ë„¤íŠ¸ì›Œí¬'
        ]
        
        content_text = ' '.join(str(item) for item in content)
        
        for strength in strength_keywords:
            if strength in content_text:
                return strength
        
        return "í•µì‹¬ ì—­ëŸ‰"
    
    def _extract_goal(self, content: List) -> str:
        """ëª©í‘œ ì¶”ì¶œ"""
        goal_keywords = [
            'ìˆ˜ìµì„±', 'ì‹œì¥ì ìœ ìœ¨', 'ì„±ì¥', 'ê²½ìŸë ¥',
            'ê³ ê°ë§Œì¡±', 'íš¨ìœ¨ì„±', 'í˜ì‹ '
        ]
        
        content_text = ' '.join(str(item) for item in content)
        
        for goal in goal_keywords:
            if goal in content_text:
                return f"{goal} ëª©í‘œ"
        
        return "ì „ëµ ëª©í‘œ"
    
    def _extract_strategy(self, content: List) -> str:
        """ì „ëµ/ë°©ë²• ì¶”ì¶œ"""
        strategy_keywords = [
            'ë””ì§€í„¸ ì „í™˜', 'í”„ë¡œì„¸ìŠ¤ ê°œì„ ', 'íˆ¬ì í™•ëŒ€',
            'êµ¬ì¡°ì¡°ì •', 'M&A', 'ì œíœ´', 'í˜ì‹ '
        ]
        
        content_text = ' '.join(str(item) for item in content)
        
        for strategy in strategy_keywords:
            if strategy in content_text:
                return strategy
        
        return "ì „ëµì  ì‹¤í–‰"
    
    def _extract_amount(self, content: List) -> str:
        """ê¸ˆì•¡ ì¶”ì¶œ"""
        content_text = ' '.join(str(item) for item in content)
        
        import re
        amount_patterns = [
            r'(\d+ì–µì›?)',
            r'(\d+ì¡°ì›?)',
            r'(\d+ë§Œì›?)'
        ]
        
        for pattern in amount_patterns:
            match = re.search(pattern, content_text)
            if match:
                return match.group(1)
        
        return "30ì–µì›"  # ê¸°ë³¸ê°’

Step 2.3: ê¸°ì¡´ generate_slide_content() ë©”ì„œë“œ ìˆ˜ì •
ìœ„ì¹˜: ContentGenerator í´ë˜ìŠ¤ ë‚´ë¶€
pythonclass ContentGenerator:
    
    async def generate_slide_content(
        self, 
        structure: Dict, 
        data: Dict
    ) -> List[Dict]:
        """
        ìŠ¬ë¼ì´ë“œ ì½˜í…ì¸  ìƒì„± (í—¤ë“œë¼ì¸ ìë™ ì ìš©)
        
        Args:
            structure: ìŠ¬ë¼ì´ë“œ êµ¬ì¡°
            data: ì›ë³¸ ë°ì´í„°
        
        Returns:
            ìŠ¬ë¼ì´ë“œ ë°ì´í„° ë¦¬ìŠ¤íŠ¸
        """
        logger.info("=== ContentGenerator: ì½˜í…ì¸  ìƒì„± ì‹œì‘ ===")
        
        # ê¸°ì¡´ ë¡œì§ìœ¼ë¡œ ìŠ¬ë¼ì´ë“œ ìƒì„±
        slides_data = await self._generate_initial_slides(structure, data)
        
        # âœ… ëª¨ë“  ìŠ¬ë¼ì´ë“œì— í—¤ë“œë¼ì¸ ì ìš©
        logger.info("=== HeadlineGenerator: í—¤ë“œë¼ì¸ ìƒì„± ì‹œì‘ ===")
        
        for i, slide_data in enumerate(slides_data):
            try:
                # í—¤ë“œë¼ì¸ ìƒì„± ë˜ëŠ” ê°œì„ 
                headline = self._generate_or_enhance_headline(slide_data, i)
                
                # ìŠ¬ë¼ì´ë“œ ë°ì´í„°ì— ì ìš©
                slide_data['headline'] = headline
                slide_data['title'] = headline  # title í•„ë“œë„ ë™ê¸°í™”
                
                logger.info(f"Slide {i}: í—¤ë“œë¼ì¸ ì ìš© ì™„ë£Œ - \"{headline[:50]}...\"")
                
            except Exception as e:
                logger.error(f"Slide {i}: í—¤ë“œë¼ì¸ ìƒì„± ì‹¤íŒ¨ - {e}")
                # ì‹¤íŒ¨ ì‹œ ê¸°ë³¸ íƒ€ì´í‹€
                slide_data['headline'] = f"Slide {i + 1}"
                slide_data['title'] = f"Slide {i + 1}"
        
        logger.info(f"=== ì´ {len(slides_data)}ê°œ ìŠ¬ë¼ì´ë“œ í—¤ë“œë¼ì¸ ìƒì„± ì™„ë£Œ ===")
        
        return slides_data
    
    async def _generate_initial_slides(
        self, 
        structure: Dict, 
        data: Dict
    ) -> List[Dict]:
        """
        ì´ˆê¸° ìŠ¬ë¼ì´ë“œ ìƒì„± (ê¸°ì¡´ ë¡œì§ ìœ ì§€)
        
        ì´ ë©”ì„œë“œëŠ” ê¸°ì¡´ ì½”ë“œë¥¼ ê·¸ëŒ€ë¡œ ìœ ì§€í•˜ê±°ë‚˜
        ì•½ê°„ ë¦¬íŒ©í† ë§í•˜ì—¬ ì‚¬ìš©
        """
        # ê¸°ì¡´ generate_slide_contentì˜ ë¡œì§ì„
        # ì—¬ê¸°ë¡œ ì´ë™ (í—¤ë“œë¼ì¸ ìƒì„± ì œì™¸)
        
        # ... ê¸°ì¡´ ì½”ë“œ ...
        
        pass

Step 2.4: í†µí•© í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±
íŒŒì¼: test_headline_integration.py (ì„ì‹œ í…ŒìŠ¤íŠ¸)
python"""
HeadlineGenerator + ContentGenerator í†µí•© í…ŒìŠ¤íŠ¸
"""

import sys
sys.path.append('/app')

from app.services.content_generator import ContentGenerator
import asyncio


async def test_integration():
    """í†µí•© í…ŒìŠ¤íŠ¸"""
    
    print("=== HeadlineGenerator í†µí•© í…ŒìŠ¤íŠ¸ ì‹œì‘ ===\n")
    
    # ContentGenerator ì´ˆê¸°í™”
    generator = ContentGenerator()
    
    # í…ŒìŠ¤íŠ¸ìš© ìŠ¬ë¼ì´ë“œ ë°ì´í„°
    test_slides = [
        {
            'content': ['ì‹ ì œí’ˆ ì¶œì‹œë¡œ ë§¤ì¶œ 50% ì¦ê°€', 'ì•„ì‹œì•„ ì‹œì¥ ì§„ì¶œ ì„±ê³µ'],
            'type': 'executive_summary'
        },
        {
            'content': ['ê²½ìŸì‚¬ ëŒ€ë¹„ 2ë°° ë¹ ë¥¸ ì„±ì¥', 'ì‹œì¥ ì ìœ ìœ¨ 30% í™•ë³´'],
            'type': 'analysis'
        },
        {
            'content': ['ìš´ì˜ íš¨ìœ¨í™”ë¡œ 30ì–µì› ë¹„ìš© ì ˆê°', '2ë…„ ë‚´ ëª©í‘œ ë‹¬ì„± ê°€ëŠ¥'],
            'type': 'financial'
        },
        {
            'content': ['ë””ì§€í„¸ ì „í™˜ ì¶”ì§„', 'ê³ ê° ê²½í—˜ ê°œì„ ', 'ë§¤ì¶œ ì¦ëŒ€'],
            'type': 'strategy'
        }
    ]
    
    # ê° ìŠ¬ë¼ì´ë“œì— í—¤ë“œë¼ì¸ ìƒì„±
    for i, slide_data in enumerate(test_slides):
        print(f"--- Slide {i + 1} ---")
        print(f"ì½˜í…ì¸ : {slide_data['content']}")
        
        headline = generator._generate_or_enhance_headline(slide_data, i)
        quality = generator.sowhat_tester.evaluate(headline)
        
        print(f"ìƒì„±ëœ í—¤ë“œë¼ì¸: {headline}")
        print(f"í’ˆì§ˆ ì ìˆ˜: {quality:.2f}")
        print()
    
    print("=== í†µí•© í…ŒìŠ¤íŠ¸ ì™„ë£Œ ===")


if __name__ == "__main__":
    asyncio.run(test_integration())

âœ… ì‹¤í–‰ ë‹¨ê³„
1. ì½”ë“œ ìˆ˜ì • ì ìš©
bash# app/services/content_generator.py íŒŒì¼ ìˆ˜ì •
# (ìœ„ì˜ ì½”ë“œë¥¼ ì ìš©)
2. Docker ì¬ë¹Œë“œ
bashcd D:\PPT_Designer_OK\mckinsey-ppt-generator
docker-compose down
docker-compose up --build -d
3. í†µí•© í…ŒìŠ¤íŠ¸ ì‹¤í–‰
bash# í…ŒìŠ¤íŠ¸ íŒŒì¼ ìƒì„±
# test_headline_integration.py

# ì»¨í…Œì´ë„ˆë¡œ ë³µì‚¬
docker cp test_headline_integration.py mckinsey-ppt-generator-app-1:/app/

# ì‹¤í–‰
docker exec mckinsey-ppt-generator-app-1 python /app/test_headline_integration.py

# ì •ë¦¬
docker exec mckinsey-ppt-generator-app-1 rm /app/test_headline_integration.py
```

---

## ğŸ“Š ì˜ˆìƒ ê²°ê³¼

### ì„±ê³µ ê¸°ì¤€
```
âœ… ëª¨ë“  ìŠ¬ë¼ì´ë“œì— í—¤ë“œë¼ì¸ ìë™ ìƒì„±
âœ… í’ˆì§ˆ ì ìˆ˜ 0.80 ì´ìƒ ë‹¬ì„±
âœ… McKinsey 4ê°€ì§€ íŒ¨í„´ ìë™ ì ìš©
âœ… ì €í’ˆì§ˆ í—¤ë“œë¼ì¸ ìë™ ì¬ìƒì„±
```

### ì¶œë ¥ ì˜ˆì‹œ
```
=== HeadlineGenerator í†µí•© í…ŒìŠ¤íŠ¸ ì‹œì‘ ===

--- Slide 1 ---
ì½˜í…ì¸ : ['ì‹ ì œí’ˆ ì¶œì‹œë¡œ ë§¤ì¶œ 50% ì¦ê°€', 'ì•„ì‹œì•„ ì‹œì¥ ì§„ì¶œ ì„±ê³µ']
ìƒì„±ëœ í—¤ë“œë¼ì¸: ì‹ ì œí’ˆì´ ì•„ì‹œì•„ ì‹œì¥ì—ì„œ 3ë…„ ë‚´ 50% ì„±ì¥í•˜ì—¬ ìµœëŒ€ ê¸°íšŒ ì œê³µ
í’ˆì§ˆ ì ìˆ˜: 0.88

--- Slide 2 ---
ì½˜í…ì¸ : ['ê²½ìŸì‚¬ ëŒ€ë¹„ 2ë°° ë¹ ë¥¸ ì„±ì¥', 'ì‹œì¥ ì ìœ ìœ¨ 30% í™•ë³´']
ìƒì„±ëœ í—¤ë“œë¼ì¸: ê²½ìŸì‚¬ ëŒ€ë¹„ 2ë°° ë¹ ë¥¸ í˜ì‹ ìœ¼ë¡œ ì‹œì¥ ë¦¬ë”ì‹­ í™•ë³´
í’ˆì§ˆ ì ìˆ˜: 0.85

--- Slide 3 ---
ì½˜í…ì¸ : ['ìš´ì˜ íš¨ìœ¨í™”ë¡œ 30ì–µì› ë¹„ìš© ì ˆê°', '2ë…„ ë‚´ ëª©í‘œ ë‹¬ì„± ê°€ëŠ¥']
ìƒì„±ëœ í—¤ë“œë¼ì¸: ìš´ì˜ íš¨ìœ¨í™”ë¡œ 2ë…„ ë‚´ 30ì–µì› ë¹„ìš© ì ˆê° ì‹¤í˜„
í’ˆì§ˆ ì ìˆ˜: 0.91

--- Slide 4 ---
ì½˜í…ì¸ : ['ë””ì§€í„¸ ì „í™˜ ì¶”ì§„', 'ê³ ê° ê²½í—˜ ê°œì„ ', 'ë§¤ì¶œ ì¦ëŒ€']
ìƒì„±ëœ í—¤ë“œë¼ì¸: ë””ì§€í„¸ ì „í™˜ì˜ í•µì‹¬ ì—­ëŸ‰ì´ 50% ê°œì„ ìœ¼ë¡œ ì „ëµ ëª©í‘œ ë‹¬ì„± ê°€ëŠ¥
í’ˆì§ˆ ì ìˆ˜: 0.83

=== í†µí•© í…ŒìŠ¤íŠ¸ ì™„ë£Œ ===
```

---

## ğŸ¯ í†µí•© ì™„ë£Œ í›„ íš¨ê³¼

### Clarity ì ìˆ˜ ê°œì„ 
```
Before: 0.40 (íƒ€ì´í‹€ ëˆ„ë½/ì €í’ˆì§ˆ)
After:  0.90 (McKinsey í—¤ë“œë¼ì¸ ìë™ ìƒì„±)
ê°œì„ í­: +0.50
```

### ì „ì²´ í’ˆì§ˆ ì ìˆ˜ ê¸°ì—¬
```
í˜„ì¬ ì´ì : 0.503
Clarity ê¸°ì—¬: +0.10 (0.50 Ã— 20%)
ì˜ˆìƒ ì´ì : 0.603

ëª©í‘œ ë‹¬ì„±ë¥ : 71% (0.603 / 0.850)
